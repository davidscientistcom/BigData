<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MongoDB: Fundamentos y Conceptos - Gu√≠a Visual Interactiva</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0f2027 0%, #203a43 50%, #2c5364 100%);
            color: #e0e0e0;
            line-height: 1.6;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        h1 {
            text-align: center;
            color: #00ED64;
            font-size: 3em;
            margin-bottom: 10px;
            text-shadow: 0 0 20px rgba(0, 237, 100, 0.3);
        }

        .subtitle {
            text-align: center;
            color: #a0a0a0;
            font-size: 1.3em;
            margin-bottom: 50px;
            font-style: italic;
        }

        h2 {
            color: #00ED64;
            font-size: 2.2em;
            margin: 50px 0 30px 0;
            padding-bottom: 15px;
            border-bottom: 3px solid rgba(0, 237, 100, 0.3);
        }

        h3 {
            color: #4DB8FF;
            font-size: 1.6em;
            margin: 30px 0 20px 0;
        }

        p {
            margin-bottom: 20px;
            color: #d0d0d0;
            font-size: 1.1em;
        }

        .visual-section {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
            border: 2px solid rgba(0, 237, 100, 0.2);
        }

        .comparison-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 30px 0;
        }

        .comparison-box {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 25px;
            border: 2px solid rgba(100, 150, 200, 0.3);
            transition: all 0.3s ease;
        }

        .comparison-box:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 237, 100, 0.2);
            border-color: #00ED64;
        }

        .comparison-box h4 {
            color: #4DB8FF;
            font-size: 1.4em;
            margin-bottom: 15px;
            text-align: center;
        }

        .code-block {
            background: #1a1a1a;
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
            overflow-x: auto;
            border-left: 4px solid #00ED64;
            font-family: 'Courier New', monospace;
            font-size: 0.95em;
        }

        .code-block pre {
            color: #a9dc76;
        }

        .interactive-diagram {
            min-height: 400px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            position: relative;
            overflow: hidden;
        }

        /* Estilos para nodos de arquitectura */
        .node {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            color: white;
            font-weight: bold;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
            cursor: pointer;
            border: 2px solid transparent;
        }

        .node:hover {
            transform: scale(1.05);
            border-color: #00ED64;
            box-shadow: 0 6px 25px rgba(0, 237, 100, 0.4);
        }

        .node.primary {
            background: linear-gradient(135deg, #00ED64 0%, #00a84a 100%);
        }

        .node.secondary {
            background: linear-gradient(135deg, #4DB8FF 0%, #2979FF 100%);
        }

        .node.config {
            background: linear-gradient(135deg, #FFA726 0%, #FB8C00 100%);
        }

        .node.mongos {
            background: linear-gradient(135deg, #AB47BC 0%, #7B1FA2 100%);
        }

        .arrow {
            stroke: #00ED64;
            stroke-width: 3;
            fill: none;
            marker-end: url(#arrowhead);
            opacity: 0.7;
            transition: all 0.3s ease;
        }

        .arrow.animated {
            stroke-dasharray: 10;
            animation: dash 20s linear infinite;
        }

        @keyframes dash {
            to {
                stroke-dashoffset: -1000;
            }
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: 0.5;
            }
        }

        /* Documento visual */
        .document-visual {
            background: #2a2a2a;
            border-radius: 10px;
            padding: 20px;
            font-family: monospace;
            color: #a9dc76;
            border: 2px solid #00ED64;
            margin: 20px 0;
            position: relative;
            overflow: auto;
        }

        .document-visual::before {
            content: '{ MongoDB Document }';
            position: absolute;
            top: -12px;
            left: 20px;
            background: #0f2027;
            padding: 0 10px;
            color: #00ED64;
            font-size: 0.9em;
        }

        .json-key {
            color: #4DB8FF;
        }

        .json-string {
            color: #ffd866;
        }

        .json-number {
            color: #ff6188;
        }

        .json-boolean {
            color: #ab9df2;
        }

        /* Tabs interactivos */
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            border-bottom: 2px solid rgba(0, 237, 100, 0.3);
        }

        .tab {
            padding: 12px 25px;
            background: rgba(255, 255, 255, 0.05);
            border: none;
            color: #a0a0a0;
            cursor: pointer;
            border-radius: 8px 8px 0 0;
            transition: all 0.3s ease;
            font-size: 1.1em;
        }

        .tab.active {
            background: #00ED64;
            color: #0f2027;
            font-weight: bold;
        }

        .tab:hover {
            background: rgba(0, 237, 100, 0.2);
            color: #00ED64;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Grid de arquitectura */
        .architecture-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .arch-component {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .arch-component:hover {
            border-color: #00ED64;
            background: rgba(0, 237, 100, 0.1);
            transform: translateY(-5px);
        }

        .arch-icon {
            font-size: 3em;
            margin-bottom: 10px;
        }

        /* Tooltip */
        .tooltip {
            position: relative;
            display: inline-block;
            cursor: help;
            color: #4DB8FF;
            border-bottom: 2px dotted #4DB8FF;
        }

        .tooltip .tooltiptext {
            visibility: hidden;
            width: 300px;
            background-color: #1a1a1a;
            color: #fff;
            text-align: left;
            border-radius: 6px;
            padding: 15px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -150px;
            opacity: 0;
            transition: opacity 0.3s;
            border: 2px solid #00ED64;
            font-size: 0.9em;
        }

        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }

        /* Highlight boxes */
        .highlight-box {
            background: rgba(0, 237, 100, 0.1);
            border-left: 5px solid #00ED64;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
        }

        .warning-box {
            background: rgba(255, 167, 38, 0.1);
            border-left: 5px solid #FFA726;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
        }

        .info-box {
            background: rgba(77, 184, 255, 0.1);
            border-left: 5px solid #4DB8FF;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
        }

        /* Toggle switch para comparaciones */
        .toggle-container {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin: 30px 0;
        }

        .toggle-switch {
            position: relative;
            width: 80px;
            height: 40px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #667eea;
            transition: 0.4s;
            border-radius: 34px;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 32px;
            width: 32px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: 0.4s;
            border-radius: 50%;
        }

        input:checked + .slider {
            background-color: #00ED64;
        }

        input:checked + .slider:before {
            transform: translateX(40px);
        }

        .index {
            background: rgba(0, 0, 0, 0.2);
            padding: 30px;
            border-radius: 10px;
            margin: 30px 0;
        }

        .index h3 {
            margin-bottom: 20px;
        }

        .index ul {
            list-style: none;
            padding-left: 0;
        }

        .index li {
            padding: 10px 20px;
            margin: 5px 0;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
            border-left: 3px solid transparent;
        }

        .index li:hover {
            background: rgba(0, 237, 100, 0.1);
            border-left-color: #00ED64;
            transform: translateX(10px);
        }

        .index li a {
            color: #d0d0d0;
            text-decoration: none;
            display: block;
        }

        @media (max-width: 768px) {
            .comparison-container {
                grid-template-columns: 1fr;
            }

            h1 {
                font-size: 2em;
            }

            .container {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üçÉ MongoDB: Fundamentos y Conceptos</h1>
        <p class="subtitle">"Desvigamiento" Visual e Interactivo</p>

        <!-- √çndice -->
        <div class="index">
            <h3>üìë √çndice Navegable</h3>
            <ul>
                <li><a href="#seccion-0">0. ¬øQu√© es MongoDB y por qu√© existe?</a></li>
                <li><a href="#seccion-1">1. Conceptos fundamentales de MongoDB</a></li>
                <li><a href="#seccion-2">2. Modelo de datos en MongoDB</a></li>
                <li><a href="#seccion-3">3. Arquitectura conceptual</a></li>
                <li><a href="#seccion-4">4. √çndices: el secreto del rendimiento</a></li>
                <li><a href="#seccion-5">5. Consistencia y transacciones</a></li>
            </ul>
        </div>

        <!-- Secci√≥n 0: Introducci√≥n -->
        <div id="seccion-0">
            <h2>0. ¬øQu√© es MongoDB y por qu√© existe?</h2>
            
            <h3>0.1. El problema con las bases de datos tradicionales</h3>
            
            <div class="visual-section">
                <h4 style="color: #4DB8FF; text-align: center; margin-bottom: 30px;">SQL vs NoSQL: Comparaci√≥n Visual</h4>
                
                <div class="comparison-container">
                    <div class="comparison-box">
                        <h4>üóÑÔ∏è Base de Datos SQL</h4>
                        <div class="code-block">
<pre>TABLA: usuarios
+----+---------+-----------+
| id | nombre  | apellido  |
+----+---------+-----------+
| 1  | Juan    | Garc√≠a    |
| 2  | Mar√≠a   | L√≥pez     |
+----+---------+-----------+

TABLA: direcciones
+----+------------+---------+
| id | usuario_id | ciudad  |
+----+------------+---------+
| 1  | 1          | Madrid  |
| 2  | 1          | Valencia|
+----+------------+---------+

-- Query con JOIN
SELECT u.*, d.*
FROM usuarios u
JOIN direcciones d
  ON u.id = d.usuario_id;</pre>
                        </div>
                        <div class="info-box">
                            <strong>Caracter√≠sticas:</strong>
                            <ul style="margin-top: 10px; padding-left: 20px;">
                                <li>Esquema fijo (rigid schema)</li>
                                <li>Relaciones mediante JOINs</li>
                                <li>Normalizaci√≥n estricta</li>
                                <li>Escalado vertical</li>
                            </ul>
                        </div>
                    </div>

                    <div class="comparison-box">
                        <h4>üçÉ Base de Datos MongoDB</h4>
                        <div class="document-visual">
<pre>{
  <span class="json-key">"_id"</span>: <span class="json-string">"507f1f77bcf8..."</span>,
  <span class="json-key">"nombre"</span>: <span class="json-string">"Juan"</span>,
  <span class="json-key">"apellido"</span>: <span class="json-string">"Garc√≠a"</span>,
  <span class="json-key">"direcciones"</span>: [
    {
      <span class="json-key">"ciudad"</span>: <span class="json-string">"Madrid"</span>,
      <span class="json-key">"cp"</span>: <span class="json-string">"28001"</span>
    },
    {
      <span class="json-key">"ciudad"</span>: <span class="json-string">"Valencia"</span>,
      <span class="json-key">"cp"</span>: <span class="json-string">"46001"</span>
    }
  ]
}</pre>
                        </div>
                        <div class="highlight-box">
                            <strong>Caracter√≠sticas:</strong>
                            <ul style="margin-top: 10px; padding-left: 20px;">
                                <li>Esquema flexible (flexible schema)</li>
                                <li>Datos anidados (embedded)</li>
                                <li>Sin JOINs necesarios</li>
                                <li>Escalado horizontal</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <h3>0.2. ¬øCu√°ndo usar MongoDB?</h3>
            
            <div class="architecture-grid">
                <div class="arch-component" style="border-color: #00ED64;">
                    <div class="arch-icon">‚úÖ</div>
                    <h4 style="color: #00ED64;">S√≠ usar MongoDB</h4>
                    <ul style="text-align: left; padding-left: 20px; margin-top: 15px;">
                        <li>Estructura variable de datos</li>
                        <li>Escalado horizontal necesario</li>
                        <li>Desarrollo √°gil</li>
                        <li>Alto volumen I/O</li>
                        <li>Datos jer√°rquicos/JSON</li>
                    </ul>
                </div>

                <div class="arch-component" style="border-color: #ff6188;">
                    <div class="arch-icon">‚ùå</div>
                    <h4 style="color: #ff6188;">NO usar MongoDB</h4>
                    <ul style="text-align: left; padding-left: 20px; margin-top: 15px;">
                        <li>Transacciones complejas</li>
                        <li>Relaciones muchos-a-muchos</li>
                        <li>Esquema estricto requerido</li>
                        <li>JOINs complejos frecuentes</li>
                        <li>An√°lisis SQL complejos</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Secci√≥n 1: Conceptos fundamentales -->
        <div id="seccion-1">
            <h2>1. Conceptos Fundamentales de MongoDB</h2>
            
            <h3>1.1. Documentos y BSON</h3>
            
            <p>Un <span class="tooltip">documento<span class="tooltiptext">Un documento es la unidad b√°sica de datos en MongoDB, equivalente a una fila en SQL pero con estructura flexible en formato JSON/BSON.</span></span> en MongoDB es equivalente a una "fila" en SQL, pero mucho m√°s flexible.</p>

            <div class="visual-section">
                <h4 style="color: #4DB8FF; margin-bottom: 20px;">Anatom√≠a de un Documento MongoDB</h4>
                
                <div class="document-visual" style="font-size: 1.1em;">
<pre>{
  <span class="json-key">"_id"</span>: <span class="json-string">ObjectId("507f1f77bcf86cd799439011")</span>,  <span style="color: #6c6c6c;">‚Üê ID √∫nico autom√°tico</span>
  <span class="json-key">"nombre"</span>: <span class="json-string">"Producto Premium"</span>,                  <span style="color: #6c6c6c;">‚Üê String</span>
  <span class="json-key">"precio"</span>: <span class="json-number">99.99</span>,                               <span style="color: #6c6c6c;">‚Üê Number (double)</span>
  <span class="json-key">"stock"</span>: <span class="json-number">150</span>,                                  <span style="color: #6c6c6c;">‚Üê Number (integer)</span>
  <span class="json-key">"activo"</span>: <span class="json-boolean">true</span>,                                <span style="color: #6c6c6c;">‚Üê Boolean</span>
  <span class="json-key">"categorias"</span>: [<span class="json-string">"electr√≥nica"</span>, <span class="json-string">"ofertas"</span>],     <span style="color: #6c6c6c;">‚Üê Array</span>
  <span class="json-key">"fabricante"</span>: {                                <span style="color: #6c6c6c;">‚Üê Embedded Document</span>
    <span class="json-key">"nombre"</span>: <span class="json-string">"TechCorp"</span>,
    <span class="json-key">"pais"</span>: <span class="json-string">"Espa√±a"</span>
  },
  <span class="json-key">"fecha_alta"</span>: <span class="json-string">ISODate("2026-01-15T10:30:00Z")</span>, <span style="color: #6c6c6c;">‚Üê Date</span>
  <span class="json-key">"metadata"</span>: <span class="json-boolean">null</span>                               <span style="color: #6c6c6c;">‚Üê Null</span>
}</pre>
                </div>

                <div class="info-box">
                    <strong>üîë Tipos de datos BSON importantes:</strong>
                    <ul style="margin-top: 10px; padding-left: 20px;">
                        <li><strong>ObjectId</strong>: Identificador √∫nico de 12 bytes (timestamp + machine + process + counter)</li>
                        <li><strong>String</strong>: Texto UTF-8</li>
                        <li><strong>Number</strong>: Int32, Int64, Double, Decimal128</li>
                        <li><strong>Date</strong>: Timestamp en milisegundos desde Unix epoch</li>
                        <li><strong>Array</strong>: Listas ordenadas de cualquier tipo</li>
                        <li><strong>Embedded Document</strong>: Documentos anidados</li>
                    </ul>
                </div>
            </div>

            <h3>1.2. Colecciones</h3>
            
            <p>Una <span class="tooltip">colecci√≥n<span class="tooltiptext">Una colecci√≥n es un grupo de documentos MongoDB, equivalente a una tabla en SQL pero sin esquema fijo.</span></span> es equivalente a una "tabla" en SQL, pero sin esquema fijo.</p>

            <div class="visual-section">
                <h4 style="color: #4DB8FF; margin-bottom: 20px;">Flexibilidad de Esquema en Colecciones</h4>
                
                <div class="tabs">
                    <button class="tab active" onclick="switchTab(event, 'doc1')">Documento 1 (Producto F√≠sico)</button>
                    <button class="tab" onclick="switchTab(event, 'doc2')">Documento 2 (Producto Digital)</button>
                    <button class="tab" onclick="switchTab(event, 'doc3')">Documento 3 (Servicio)</button>
                </div>

                <div id="doc1" class="tab-content active">
                    <div class="document-visual">
<pre><span style="color: #6c6c6c;">// Colecci√≥n: productos</span>
{
  <span class="json-key">"_id"</span>: <span class="json-number">1</span>,
  <span class="json-key">"nombre"</span>: <span class="json-string">"Ordenador port√°til"</span>,
  <span class="json-key">"tipo"</span>: <span class="json-string">"fisico"</span>,
  <span class="json-key">"peso"</span>: <span class="json-number">1.8</span>,
  <span class="json-key">"dimensiones"</span>: {
    <span class="json-key">"alto"</span>: <span class="json-number">2</span>,
    <span class="json-key">"ancho"</span>: <span class="json-number">35</span>,
    <span class="json-key">"fondo"</span>: <span class="json-number">25</span>
  }
}</pre>
                    </div>
                </div>

                <div id="doc2" class="tab-content">
                    <div class="document-visual">
<pre><span style="color: #6c6c6c;">// Colecci√≥n: productos</span>
{
  <span class="json-key">"_id"</span>: <span class="json-number">2</span>,
  <span class="json-key">"nombre"</span>: <span class="json-string">"Curso online de MongoDB"</span>,
  <span class="json-key">"tipo"</span>: <span class="json-string">"digital"</span>,
  <span class="json-key">"duracion_horas"</span>: <span class="json-number">20</span>,
  <span class="json-key">"url_acceso"</span>: <span class="json-string">"https://cursos.ejemplo.com/mongodb"</span>,
  <span class="json-key">"formato"</span>: <span class="json-string">"video"</span>
}</pre>
                    </div>
                </div>

                <div id="doc3" class="tab-content">
                    <div class="document-visual">
<pre><span style="color: #6c6c6c;">// Colecci√≥n: productos</span>
{
  <span class="json-key">"_id"</span>: <span class="json-number">3</span>,
  <span class="json-key">"nombre"</span>: <span class="json-string">"Consultor√≠a MongoDB"</span>,
  <span class="json-key">"tipo"</span>: <span class="json-string">"servicio"</span>,
  <span class="json-key">"tarifa_hora"</span>: <span class="json-number">120</span>,
  <span class="json-key">"disponibilidad"</span>: [<span class="json-string">"lunes"</span>, <span class="json-string">"mi√©rcoles"</span>, <span class="json-string">"viernes"</span>],
  <span class="json-key">"especialidad"</span>: <span class="json-string">"sharding y replicaci√≥n"</span>
}</pre>
                    </div>
                </div>

                <div class="highlight-box" style="margin-top: 20px;">
                    <strong>üí° Observa:</strong> Los tres documentos est√°n en la misma colecci√≥n "productos" pero tienen campos completamente diferentes. Esto es v√°lido y potente, pero requiere disciplina en el dise√±o.
                </div>
            </div>
        </div>

        <!-- Secci√≥n 2: Modelo de datos -->
        <div id="seccion-2">
            <h2>2. Modelo de Datos en MongoDB</h2>
            
            <h3>2.1. Embebido vs. Referencias</h3>

            <div class="toggle-container">
                <span style="font-size: 1.2em; color: #4DB8FF;">Modelo por Referencias</span>
                <label class="toggle-switch">
                    <input type="checkbox" id="modelToggle" onchange="toggleModel()">
                    <span class="slider"></span>
                </label>
                <span style="font-size: 1.2em; color: #00ED64;">Modelo Embebido</span>
            </div>

            <div class="visual-section">
                <div id="referencedModel">
                    <h4 style="color: #4DB8FF; text-align: center; margin-bottom: 30px;">Modelo por Referencias (Referenced)</h4>
                    
                    <div class="comparison-container">
                        <div class="comparison-box">
                            <h4>üìÑ Colecci√≥n: posts</h4>
                            <div class="document-visual">
<pre>{
  <span class="json-key">"_id"</span>: <span class="json-string">ObjectId("abc123")</span>,
  <span class="json-key">"titulo"</span>: <span class="json-string">"Intro a MongoDB"</span>,
  <span class="json-key">"contenido"</span>: <span class="json-string">"MongoDB es..."</span>,
  <span class="json-key">"autor"</span>: <span class="json-string">"Juan Garc√≠a"</span>
}</pre>
                            </div>
                        </div>

                        <div class="comparison-box">
                            <h4>üí¨ Colecci√≥n: comentarios</h4>
                            <div class="document-visual">
<pre>{
  <span class="json-key">"_id"</span>: <span class="json-string">ObjectId("def456")</span>,
  <span class="json-key">"post_id"</span>: <span class="json-string">ObjectId("abc123")</span>,
  <span class="json-key">"usuario"</span>: <span class="json-string">"Mar√≠a"</span>,
  <span class="json-key">"texto"</span>: <span class="json-string">"¬°Excelente!"</span>
}

{
  <span class="json-key">"_id"</span>: <span class="json-string">ObjectId("ghi789")</span>,
  <span class="json-key">"post_id"</span>: <span class="json-string">ObjectId("abc123")</span>,
  <span class="json-key">"usuario"</span>: <span class="json-string">"Pedro"</span>,
  <span class="json-key">"texto"</span>: <span class="json-string">"Muy √∫til"</span>
}</pre>
                            </div>
                        </div>
                    </div>

                    <div class="info-box">
                        <strong>‚úÖ Ventajas:</strong> Documentos peque√±os, sin l√≠mite de comentarios, f√°cil consultar "todos los comentarios de un usuario"
                        <br><br>
                        <strong>‚ùå Desventajas:</strong> Dos consultas necesarias, sin atomicidad, m√°s complejidad en c√≥digo
                    </div>
                </div>

                <div id="embeddedModel" style="display: none;">
                    <h4 style="color: #00ED64; text-align: center; margin-bottom: 30px;">Modelo Embebido (Embedded)</h4>
                    
                    <div class="document-visual">
<pre><span style="color: #6c6c6c;">// Colecci√≥n: posts</span>
{
  <span class="json-key">"_id"</span>: <span class="json-string">ObjectId("abc123")</span>,
  <span class="json-key">"titulo"</span>: <span class="json-string">"Introducci√≥n a MongoDB"</span>,
  <span class="json-key">"contenido"</span>: <span class="json-string">"MongoDB es una base de datos..."</span>,
  <span class="json-key">"autor"</span>: <span class="json-string">"Juan Garc√≠a"</span>,
  <span class="json-key">"fecha"</span>: <span class="json-string">ISODate("2026-02-01")</span>,
  <span class="json-key">"comentarios"</span>: [
    {
      <span class="json-key">"usuario"</span>: <span class="json-string">"Mar√≠a"</span>,
      <span class="json-key">"texto"</span>: <span class="json-string">"¬°Excelente art√≠culo!"</span>,
      <span class="json-key">"fecha"</span>: <span class="json-string">ISODate("2026-02-02")</span>
    },
    {
      <span class="json-key">"usuario"</span>: <span class="json-string">"Pedro"</span>,
      <span class="json-key">"texto"</span>: <span class="json-string">"Muy √∫til, gracias"</span>,
      <span class="json-key">"fecha"</span>: <span class="json-string">ISODate("2026-02-03")</span>
    }
  ]
}</pre>
                    </div>

                    <div class="highlight-box">
                        <strong>‚úÖ Ventajas:</strong> Una sola consulta, atomicidad garantizada, mejor rendimiento
                        <br><br>
                        <strong>‚ùå Desventajas:</strong> L√≠mite de 16MB por documento, dif√≠cil consultar comentarios por usuario, documentos grandes
                    </div>
                </div>
            </div>

            <div class="warning-box">
                <strong>‚ö†Ô∏è Regla de oro:</strong>
                <ul style="margin-top: 10px; padding-left: 20px;">
                    <li><strong>Usa EMBEBIDO</strong> cuando: relaci√≥n 1:pocos, datos se consultan juntos, no crecen sin l√≠mite</li>
                    <li><strong>Usa REFERENCIAS</strong> cuando: relaci√≥n 1:muchos o muchos:muchos, datos independientes, crecimiento ilimitado</li>
                </ul>
            </div>
        </div>

        <!-- Secci√≥n 3: Arquitectura -->
        <div id="seccion-3">
            <h2>3. Arquitectura Conceptual de MongoDB</h2>
            
            <h3>3.1. Standalone vs. Replica Set vs. Sharded Cluster</h3>

            <div class="tabs">
                <button class="tab active" onclick="switchTab(event, 'standalone')">Standalone</button>
                <button class="tab" onclick="switchTab(event, 'replicaset')">Replica Set</button>
                <button class="tab" onclick="switchTab(event, 'sharded')">Sharded Cluster</button>
            </div>

            <div id="standalone" class="tab-content active">
                <div class="interactive-diagram">
                    <svg width="100%" height="300" style="display: block; margin: 0 auto;">
                        <!-- Aplicaci√≥n -->
                        <g transform="translate(400, 50)">
                            <rect width="200" height="60" rx="10" fill="#AB47BC" stroke="#7B1FA2" stroke-width="2"/>
                            <text x="100" y="35" text-anchor="middle" fill="white" font-size="18" font-weight="bold">APLICACI√ìN</text>
                        </g>

                        <!-- Flecha -->
                        <line x1="500" y1="110" x2="500" y2="170" class="arrow"/>
                        
                        <!-- Servidor √∫nico -->
                        <g transform="translate(375, 180)">
                            <rect width="250" height="80" rx="10" fill="#667eea" stroke="#764ba2" stroke-width="2"/>
                            <text x="125" y="30" text-anchor="middle" fill="white" font-size="20" font-weight="bold">MongoDB</text>
                            <text x="125" y="55" text-anchor="middle" fill="white" font-size="14">(Servidor √önico)</text>
                        </g>
                    </svg>
                </div>
                <div class="info-box">
                    <strong>Caracter√≠sticas:</strong>
                    <ul style="margin-top: 10px; padding-left: 20px;">
                        <li>‚úÖ Simple de configurar</li>
                        <li>‚úÖ Ideal para desarrollo</li>
                        <li>‚ùå Punto √∫nico de fallo</li>
                        <li>‚ùå Sin redundancia</li>
                        <li>‚ùå L√≠mite de escalado</li>
                    </ul>
                </div>
            </div>

            <div id="replicaset" class="tab-content">
                <div class="interactive-diagram">
                    <svg width="100%" height="400">
                        <defs>
                            <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                                <polygon points="0 0, 10 3, 0 6" fill="#00ED64"/>
                            </marker>
                        </defs>

                        <!-- Aplicaci√≥n -->
                        <g transform="translate(400, 20)">
                            <rect width="200" height="50" rx="10" fill="#AB47BC"/>
                            <text x="100" y="30" text-anchor="middle" fill="white" font-size="16" font-weight="bold">APLICACI√ìN</text>
                        </g>

                        <!-- Flecha a PRIMARY -->
                        <line x1="500" y1="70" x2="500" y2="130" class="arrow animated"/>
                        <text x="520" y="100" fill="#00ED64" font-size="12">escrituras</text>

                        <!-- PRIMARY -->
                        <g transform="translate(400, 140)">
                            <rect width="200" height="70" rx="10" fill="#00ED64" stroke="#00a84a" stroke-width="3" class="pulse"/>
                            <text x="100" y="30" text-anchor="middle" fill="white" font-size="18" font-weight="bold">PRIMARY</text>
                            <text x="100" y="50" text-anchor="middle" fill="white" font-size="14">Node A</text>
                        </g>

                        <!-- Flechas de replicaci√≥n -->
                        <line x1="450" y1="210" x2="250" y2="280" class="arrow animated"/>
                        <line x1="550" y1="210" x2="750" y2="280" class="arrow animated"/>
                        <text x="330" y="245" fill="#00ED64" font-size="11">replica</text>
                        <text x="630" y="245" fill="#00ED64" font-size="11">replica</text>

                        <!-- SECONDARY 1 -->
                        <g transform="translate(100, 290)">
                            <rect width="180" height="70" rx="10" fill="#4DB8FF" stroke="#2979FF" stroke-width="2"/>
                            <text x="90" y="30" text-anchor="middle" fill="white" font-size="16" font-weight="bold">SECONDARY</text>
                            <text x="90" y="50" text-anchor="middle" fill="white" font-size="13">Node B</text>
                        </g>

                        <!-- SECONDARY 2 -->
                        <g transform="translate(720, 290)">
                            <rect width="180" height="70" rx="10" fill="#4DB8FF" stroke="#2979FF" stroke-width="2"/>
                            <text x="90" y="30" text-anchor="middle" fill="white" font-size="16" font-weight="bold">SECONDARY</text>
                            <text x="90" y="50" text-anchor="middle" fill="white" font-size="13">Node C</text>
                        </g>
                    </svg>
                </div>
                <div class="highlight-box">
                    <strong>Funcionamiento:</strong>
                    <ul style="margin-top: 10px; padding-left: 20px;">
                        <li>‚úÖ Escrituras al PRIMARY (solo √©l acepta escrituras)</li>
                        <li>‚úÖ Los SECONDARY replican autom√°ticamente desde el PRIMARY</li>
                        <li>‚úÖ Si el PRIMARY falla, uno de los SECONDARY se convierte en PRIMARY autom√°ticamente</li>
                        <li>‚úÖ Lecturas pueden distribuirse entre todos los nodos</li>
                        <li>‚úÖ Alta disponibilidad garantizada</li>
                    </ul>
                </div>
            </div>

            <div id="sharded" class="tab-content">
                <div class="interactive-diagram" style="min-height: 600px;">
                    <svg width="100%" height="600">
                        <defs>
                            <marker id="arrowhead2" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                                <polygon points="0 0, 10 3, 0 6" fill="#00ED64"/>
                            </marker>
                        </defs>

                        <!-- Aplicaci√≥n -->
                        <g transform="translate(400, 20)">
                            <rect width="200" height="50" rx="10" fill="#AB47BC"/>
                            <text x="100" y="32" text-anchor="middle" fill="white" font-size="16" font-weight="bold">APLICACI√ìN</text>
                        </g>

                        <!-- Mongos Router -->
                        <g transform="translate(400, 100)">
                            <rect width="200" height="60" rx="10" fill="#AB47BC" stroke="#7B1FA2" stroke-width="2"/>
                            <text x="100" y="25" text-anchor="middle" fill="white" font-size="16" font-weight="bold">MONGOS</text>
                            <text x="100" y="45" text-anchor="middle" fill="white" font-size="12">(Query Router)</text>
                        </g>

                        <!-- Flechas a shards -->
                        <line x1="450" y1="160" x2="200" y2="240" stroke="#00ED64" stroke-width="2" marker-end="url(#arrowhead2)"/>
                        <line x1="500" y1="160" x2="500" y2="240" stroke="#00ED64" stroke-width="2" marker-end="url(#arrowhead2)"/>
                        <line x1="550" y1="160" x2="800" y2="240" stroke="#00ED64" stroke-width="2" marker-end="url(#arrowhead2)"/>

                        <!-- Shard 1 -->
                        <g transform="translate(80, 250)">
                            <rect width="220" height="100" rx="10" fill="#667eea" stroke="#764ba2" stroke-width="2"/>
                            <text x="110" y="30" text-anchor="middle" fill="white" font-size="16" font-weight="bold">SHARD 1 (RS)</text>
                            <text x="110" y="55" text-anchor="middle" fill="#FFD700" font-size="13">Clientes A-F</text>
                            <text x="110" y="75" text-anchor="middle" fill="white" font-size="12">3.3M docs</text>
                        </g>

                        <!-- Shard 2 -->
                        <g transform="translate(390, 250)">
                            <rect width="220" height="100" rx="10" fill="#667eea" stroke="#764ba2" stroke-width="2"/>
                            <text x="110" y="30" text-anchor="middle" fill="white" font-size="16" font-weight="bold">SHARD 2 (RS)</text>
                            <text x="110" y="55" text-anchor="middle" fill="#FFD700" font-size="13">Clientes G-M</text>
                            <text x="110" y="75" text-anchor="middle" fill="white" font-size="12">3.3M docs</text>
                        </g>

                        <!-- Shard 3 -->
                        <g transform="translate(700, 250)">
                            <rect width="220" height="100" rx="10" fill="#667eea" stroke="#764ba2" stroke-width="2"/>
                            <text x="110" y="30" text-anchor="middle" fill="white" font-size="16" font-weight="bold">SHARD 3 (RS)</text>
                            <text x="110" y="55" text-anchor="middle" fill="#FFD700" font-size="13">Clientes N-Z</text>
                            <text x="110" y="75" text-anchor="middle" fill="white" font-size="12">3.4M docs</text>
                        </g>

                        <!-- Config Servers -->
                        <g transform="translate(350, 400)">
                            <rect width="300" height="80" rx="10" fill="#FFA726" stroke="#FB8C00" stroke-width="2"/>
                            <text x="150" y="30" text-anchor="middle" fill="white" font-size="16" font-weight="bold">CONFIG SERVERS (RS)</text>
                            <text x="150" y="55" text-anchor="middle" fill="white" font-size="13">Metadatos del Cluster</text>
                        </g>

                        <!-- Flecha de mongos a config -->
                        <line x1="500" y1="160" x2="500" y2="400" stroke="#FFA726" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#arrowhead2)"/>
                    </svg>
                </div>
                <div class="warning-box">
                    <strong>Componentes del Sharded Cluster:</strong>
                    <ul style="margin-top: 10px; padding-left: 20px;">
                        <li><strong>MONGOS:</strong> Router que recibe consultas y las distribuye</li>
                        <li><strong>SHARDS:</strong> Cada shard contiene un subconjunto de datos (son Replica Sets)</li>
                        <li><strong>CONFIG SERVERS:</strong> Almacenan metadatos (qu√© datos est√°n en qu√© shard)</li>
                        <li><strong>Distribuci√≥n:</strong> Los datos se dividen seg√∫n una "shard key"</li>
                        <li><strong>Escalado:</strong> A√±adir m√°s shards = m√°s capacidad (horizontal scaling)</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Secci√≥n 4: √çndices -->
        <div id="seccion-4">
            <h2>4. √çndices: El Secreto del Rendimiento</h2>
            
            <h3>4.1. Sin √≠ndice vs. Con √≠ndice</h3>

            <div class="visual-section">
                <div class="comparison-container">
                    <div class="comparison-box">
                        <h4 style="color: #ff6188;">‚ùå Sin √çndice (Collection Scan)</h4>
                        <div class="code-block">
<pre>db.clientes.find({ 
  email: "juan@ejemplo.com" 
})

MongoDB debe:
1. Leer documento 1 ‚ùå
2. Leer documento 2 ‚ùå
3. Leer documento 3 ‚ùå
...
1,000,000. Leer 1M ‚úÖ (encontrado!)

<span style="color: #ff6188;">Documentos examinados: 1,000,000
Documentos devueltos: 1
Tiempo: ~5-10 segundos</span></pre>
                        </div>
                    </div>

                    <div class="comparison-box">
                        <h4 style="color: #00ED64;">‚úÖ Con √çndice (Index Scan)</h4>
                        <div class="code-block">
<pre>db.clientes.createIndex({ email: 1 })

db.clientes.find({ 
  email: "juan@ejemplo.com" 
})

MongoDB:
1. Consulta √≠ndice B-tree ‚úÖ
2. Encuentra "juan@ejemplo.com"
3. Lee solo ese documento

<span style="color: #00ED64;">Documentos examinados: 1
Documentos devueltos: 1
Tiempo: ~2-5 milisegundos</span></pre>
                        </div>
                    </div>
                </div>

                <div class="highlight-box">
                    <strong>üí° Mejora de rendimiento:</strong> Un √≠ndice bien dise√±ado puede acelerar las consultas <strong>1000x o m√°s</strong>.
                </div>
            </div>

            <h3>4.2. Tipos de √≠ndices</h3>

            <div class="architecture-grid">
                <div class="arch-component">
                    <div class="arch-icon">üìá</div>
                    <h4>√çndice Simple</h4>
                    <div class="code-block" style="text-align: left; font-size: 0.85em;">
<pre>{ email: 1 }</pre>
                    </div>
                    <p style="font-size: 0.9em; margin-top: 10px;">Sobre un campo √∫nico</p>
                </div>

                <div class="arch-component">
                    <div class="arch-icon">üìö</div>
                    <h4>√çndice Compuesto</h4>
                    <div class="code-block" style="text-align: left; font-size: 0.85em;">
<pre>{ apellido: 1, 
  nombre: 1 }</pre>
                    </div>
                    <p style="font-size: 0.9em; margin-top: 10px;">Sobre m√∫ltiples campos</p>
                </div>

                <div class="arch-component">
                    <div class="arch-icon">üîê</div>
                    <h4>√çndice √önico</h4>
                    <div class="code-block" style="text-align: left; font-size: 0.85em;">
<pre>{ email: 1 },
{ unique: true }</pre>
                    </div>
                    <p style="font-size: 0.9em; margin-top: 10px;">Sin duplicados</p>
                </div>

                <div class="arch-component">
                    <div class="arch-icon">üîç</div>
                    <h4>√çndice de Texto</h4>
                    <div class="code-block" style="text-align: left; font-size: 0.85em;">
<pre>{ contenido: "text" }</pre>
                    </div>
                    <p style="font-size: 0.9em; margin-top: 10px;">B√∫squeda full-text</p>
                </div>

                <div class="arch-component">
                    <div class="arch-icon">üåç</div>
                    <h4>√çndice Geoespacial</h4>
                    <div class="code-block" style="text-align: left; font-size: 0.85em;">
<pre>{ ubicacion: 
  "2dsphere" }</pre>
                    </div>
                    <p style="font-size: 0.9em; margin-top: 10px;">Consultas de proximidad</p>
                </div>

                <div class="arch-component">
                    <div class="arch-icon">#Ô∏è‚É£</div>
                    <h4>√çndice Hash</h4>
                    <div class="code-block" style="text-align: left; font-size: 0.85em;">
<pre>{ usuario_id: 
  "hashed" }</pre>
                    </div>
                    <p style="font-size: 0.9em; margin-top: 10px;">Distribuci√≥n uniforme</p>
                </div>
            </div>

            <div class="warning-box">
                <strong>‚ö†Ô∏è El dilema de los √≠ndices:</strong>
                <br><br>
                Los √≠ndices <strong>aceleran lecturas</strong> pero <strong>ralentizan escrituras</strong> (cada insert/update debe actualizar los √≠ndices).
                <br><br>
                <strong>Regla:</strong> Indexa solo los campos que consultas frecuentemente. T√≠picamente 3-5 √≠ndices por colecci√≥n.
            </div>
        </div>

        <!-- Secci√≥n 5: Consistencia -->
        <div id="seccion-5">
            <h2>5. Consistencia y Transacciones</h2>
            
            <h3>5.1. Atomicidad a nivel de documento</h3>

            <div class="visual-section">
                <p style="margin-bottom: 20px;">Las operaciones sobre un <strong>documento √∫nico</strong> son siempre at√≥micas (todo o nada).</p>
                
                <div class="document-visual">
<pre><span style="color: #6c6c6c;">// Esta operaci√≥n es AT√ìMICA</span>
db.cuentas.updateOne(
  { <span class="json-key">_id</span>: <span class="json-string">"cuenta123"</span> },
  {
    <span class="json-key">$inc</span>: { <span class="json-key">saldo</span>: <span class="json-number">-100</span> },         <span style="color: #6c6c6c;">‚Üê Decrementa saldo</span>
    <span class="json-key">$push</span>: {                    <span style="color: #6c6c6c;">‚Üê A√±ade movimiento</span>
      <span class="json-key">movimientos</span>: {
        <span class="json-key">tipo</span>: <span class="json-string">"retiro"</span>,
        <span class="json-key">cantidad</span>: <span class="json-number">100</span>,
        <span class="json-key">fecha</span>: <span class="json-string">new Date()</span>
      }
    }
  }
)

<span style="color: #00ED64;">‚úÖ O se ejecutan AMBAS operaciones, o NINGUNA</span></pre>
                </div>

                <div class="highlight-box">
                    <strong>üí° Por eso el modelado embebido es poderoso:</strong> Si toda la informaci√≥n relacionada est√° en un documento, todas las actualizaciones son autom√°ticamente at√≥micas.
                </div>
            </div>

            <h3>5.2. Transacciones multi-documento</h3>

            <div class="visual-section">
                <p>Desde MongoDB 4.0, se soportan transacciones ACID multi-documento (como en SQL).</p>

                <div class="comparison-container">
                    <div class="comparison-box">
                        <h4 style="color: #ff6188;">‚ùå Sin Transacci√≥n (PELIGROSO)</h4>
                        <div class="code-block">
<pre>db.cuentas.updateOne(
  { _id: "A" }, 
  { $inc: { saldo: -100 } }
)

<span style="color: #ff6188;">‚ö†Ô∏è Si falla aqu√≠, 
   ¬°perdemos ‚Ç¨100!</span>

db.cuentas.updateOne(
  { _id: "B" }, 
  { $inc: { saldo: 100 } }
)</pre>
                        </div>
                    </div>

                    <div class="comparison-box">
                        <h4 style="color: #00ED64;">‚úÖ Con Transacci√≥n (SEGURO)</h4>
                        <div class="code-block">
<pre>session.startTransaction()

try {
  db.cuentas.updateOne(
    { _id: "A" },
    { $inc: { saldo: -100 } },
    { session }
  )
  
  db.cuentas.updateOne(
    { _id: "B" },
    { $inc: { saldo: 100 } },
    { session }
  )
  
  <span style="color: #00ED64;">session.commitTransaction()</span>
} catch (error) {
  <span style="color: #FFA726;">session.abortTransaction()</span>
}</pre>
                        </div>
                    </div>
                </div>

                <div class="info-box">
                    <strong>Cu√°ndo usar transacciones:</strong>
                    <ul style="margin-top: 10px; padding-left: 20px;">
                        <li>‚úÖ Operaciones financieras cr√≠ticas</li>
                        <li>‚úÖ M√∫ltiples documentos que deben cambiar juntos</li>
                        <li>‚úÖ Cuando la consistencia absoluta es obligatoria</li>
                        <li>‚ùå Evitar si no es necesario (tienen overhead)</li>
                    </ul>
                </div>
            </div>

            <h3>5.3. Consistencia eventual vs. inmediata</h3>

            <div class="interactive-diagram" style="min-height: 350px;">
                <svg width="100%" height="350">
                    <defs>
                        <marker id="arrow3" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                            <polygon points="0 0, 10 3, 0 6" fill="#00ED64"/>
                        </marker>
                    </defs>

                    <!-- Timeline -->
                    <line x1="50" y1="50" x2="950" y2="50" stroke="#666" stroke-width="2"/>
                    
                    <!-- Eventos -->
                    <circle cx="100" cy="50" r="8" fill="#00ED64"/>
                    <text x="100" y="80" text-anchor="middle" fill="#00ED64" font-size="12">t=0ms</text>
                    <text x="100" y="100" text-anchor="middle" fill="#d0d0d0" font-size="11">Escritura</text>

                    <circle cx="300" cy="50" r="8" fill="#4DB8FF"/>
                    <text x="300" y="80" text-anchor="middle" fill="#4DB8FF" font-size="12">t=10ms</text>
                    <text x="300" y="100" text-anchor="middle" fill="#d0d0d0" font-size="11">Replica SEC-1</text>

                    <circle cx="500" cy="50" r="8" fill="#4DB8FF"/>
                    <text x="500" y="80" text-anchor="middle" fill="#4DB8FF" font-size="12">t=15ms</text>
                    <text x="500" y="100" text-anchor="middle" fill="#d0d0d0" font-size="11">Replica SEC-2</text>

                    <circle cx="200" cy="50" r="8" fill="#FFA726"/>
                    <text x="200" y="80" text-anchor="middle" fill="#FFA726" font-size="12">t=5ms</text>
                    <text x="200" y="100" text-anchor="middle" fill="#d0d0d0" font-size="11">Lectura SEC-1</text>
                    <text x="200" y="120" text-anchor="middle" fill="#ff6188" font-size="11" font-weight="bold">‚ùå NO VE datos</text>

                    <!-- PRIMARY -->
                    <g transform="translate(50, 150)">
                        <rect width="150" height="50" rx="8" fill="#00ED64"/>
                        <text x="75" y="30" text-anchor="middle" fill="white" font-weight="bold">PRIMARY</text>
                    </g>

                    <!-- SECONDARY 1 -->
                    <g transform="translate(250, 150)">
                        <rect width="150" height="50" rx="8" fill="#4DB8FF"/>
                        <text x="75" y="30" text-anchor="middle" fill="white" font-weight="bold">SECONDARY 1</text>
                    </g>

                    <!-- SECONDARY 2 -->
                    <g transform="translate(450, 150)">
                        <rect width="150" height="50" rx="8" fill="#4DB8FF"/>
                        <text x="75" y="30" text-anchor="middle" fill="white" font-weight="bold">SECONDARY 2</text>
                    </g>

                    <!-- Explicaci√≥n -->
                    <text x="500" y="250" text-anchor="middle" fill="#d0d0d0" font-size="14">
                        Hay un peque√±o retraso (lag) entre PRIMARY y SECONDARY
                    </text>
                    <text x="500" y="270" text-anchor="middle" fill="#d0d0d0" font-size="14">
                        Esto se llama <tspan fill="#FFA726" font-weight="bold">CONSISTENCIA EVENTUAL</tspan>
                    </text>
                </svg>
            </div>

            <div class="info-box">
                <strong>Read Concerns (nivel de consistencia):</strong>
                <ul style="margin-top: 10px; padding-left: 20px;">
                    <li><strong>local:</strong> Lee lo que haya (r√°pido, puede no estar replicado)</li>
                    <li><strong>majority:</strong> Lee solo datos confirmados por mayor√≠a (seguro, puede tener lag)</li>
                    <li><strong>linearizable:</strong> Lee lo m√°s reciente garantizado (lento, m√°xima consistencia)</li>
                </ul>
                <br>
                <strong>Write Concerns (nivel de confirmaci√≥n):</strong>
                <ul style="margin-top: 10px; padding-left: 20px;">
                    <li><strong>w:1:</strong> Confirma cuando PRIMARY escribe (r√°pido, sin garant√≠a de replicaci√≥n)</li>
                    <li><strong>w:"majority":</strong> Confirma cuando mayor√≠a replica (lento, seguro)</li>
                </ul>
            </div>
        </div>

        <!-- Conclusi√≥n -->
        <div style="margin-top: 60px; padding: 40px; background: rgba(0, 237, 100, 0.1); border-radius: 15px; border: 2px solid #00ED64;">
            <h2 style="text-align: center; margin-bottom: 30px;">üéì Conclusi√≥n del Desvigamiento</h2>
            
            <p style="font-size: 1.15em; text-align: center; margin-bottom: 30px;">
                Ahora dominas los conceptos fundamentales de MongoDB:
            </p>

            <div class="architecture-grid">
                <div class="arch-component" style="background: rgba(0, 237, 100, 0.05);">
                    <div class="arch-icon">üìÑ</div>
                    <strong>Documentos BSON</strong>
                    <p style="font-size: 0.9em; margin-top: 10px;">Unidad de datos flexible</p>
                </div>

                <div class="arch-component" style="background: rgba(0, 237, 100, 0.05);">
                    <div class="arch-icon">üîó</div>
                    <strong>Modelado</strong>
                    <p style="font-size: 0.9em; margin-top: 10px;">Embebido vs Referencias</p>
                </div>

                <div class="arch-component" style="background: rgba(0, 237, 100, 0.05);">
                    <div class="arch-icon">üîÑ</div>
                    <strong>Replica Sets</strong>
                    <p style="font-size: 0.9em; margin-top: 10px;">Alta disponibilidad</p>
                </div>

                <div class="arch-component" style="background: rgba(0, 237, 100, 0.05);">
                    <div class="arch-icon">üìä</div>
                    <strong>Sharding</strong>
                    <p style="font-size: 0.9em; margin-top: 10px;">Escalado horizontal</p>
                </div>

                <div class="arch-component" style="background: rgba(0, 237, 100, 0.05);">
                    <div class="arch-icon">üöÄ</div>
                    <strong>√çndices</strong>
                    <p style="font-size: 0.9em; margin-top: 10px;">Clave del rendimiento</p>
                </div>

                <div class="arch-component" style="background: rgba(0, 237, 100, 0.05);">
                    <div class="arch-icon">‚ö°</div>
                    <strong>Consistencia</strong>
                    <p style="font-size: 0.9em; margin-top: 10px;">Trade-offs de rendimiento</p>
                </div>
            </div>

            <div style="text-align: center; margin-top: 40px; padding: 30px; background: rgba(0, 0, 0, 0.3); border-radius: 10px;">
                <h3 style="color: #00ED64; margin-bottom: 20px;">üéØ Siguiente paso</h3>
                <p style="font-size: 1.2em;">
                    Ahora est√°s preparado para el documento de <strong style="color: #4DB8FF;">Administraci√≥n Pr√°ctica</strong>,
                    <br>
                    donde pondremos en pr√°ctica todos estos conceptos con comandos reales,
                    <br>
                    configuraciones, scripts y escenarios de producci√≥n.
                </p>
            </div>
        </div>

        <!-- Footer -->
        <div style="text-align: center; margin-top: 60px; padding: 20px; color: #6c6c6c; font-size: 0.9em;">
            <p>MongoDB: Fundamentos y Conceptos - Gu√≠a Visual Interactiva</p>
            <p>¬© 2026 - Material educativo para curso de MongoDB</p>
        </div>
    </div>

    <script>
        // Funci√≥n para cambiar tabs
        function switchTab(event, tabId) {
            // Ocultar todos los contenidos
            const contents = document.querySelectorAll('.tab-content');
            contents.forEach(content => content.classList.remove('active'));

            // Desactivar todos los tabs
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(tab => tab.classList.remove('active'));

            // Activar el tab clickeado
            event.currentTarget.classList.add('active');

            // Mostrar el contenido correspondiente
            document.getElementById(tabId).classList.add('active');
        }

        // Toggle entre modelos embebido/referenciado
        function toggleModel() {
            const toggle = document.getElementById('modelToggle');
            const referenced = document.getElementById('referencedModel');
            const embedded = document.getElementById('embeddedModel');

            if (toggle.checked) {
                referenced.style.display = 'none';
                embedded.style.display = 'block';
            } else {
                referenced.style.display = 'block';
                embedded.style.display = 'none';
            }
        }

        // Smooth scroll para el √≠ndice
        document.querySelectorAll('.index a').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const targetId = this.getAttribute('href');
                const targetElement = document.querySelector(targetId);
                
                if (targetElement) {
                    targetElement.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Animaci√≥n de entrada para las secciones
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -100px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.opacity = '0';
                    entry.target.style.transform = 'translateY(20px)';
                    
                    setTimeout(() => {
                        entry.target.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
                        entry.target.style.opacity = '1';
                        entry.target.style.transform = 'translateY(0)';
                    }, 100);
                    
                    observer.unobserve(entry.target);
                }
            });
        }, observerOptions);

        // Observar todas las secciones principales
        document.querySelectorAll('h2, .visual-section, .comparison-container').forEach(el => {
            observer.observe(el);
        });

        // Easter egg: click en el t√≠tulo principal
        let clickCount = 0;
        document.querySelector('h1').addEventListener('click', function() {
            clickCount++;
            if (clickCount === 5) {
                this.style.transform = 'rotate(360deg)';
                this.style.transition = 'transform 1s ease';
                setTimeout(() => {
                    this.style.transform = 'rotate(0deg)';
                    clickCount = 0;
                }, 1000);
            }
        });

        console.log('%cüçÉ MongoDB Concepts - Interactive Guide', 'color: #00ED64; font-size: 20px; font-weight: bold;');
        console.log('%cDocumento interactivo creado para el curso de Administraci√≥n de MongoDB', 'color: #4DB8FF; font-size: 14px;');
    </script>
</body>
</html>
